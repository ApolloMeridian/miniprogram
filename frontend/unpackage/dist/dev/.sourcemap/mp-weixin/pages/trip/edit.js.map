{"version":3,"sources":["uni-app:///main.js","webpack:///D:/project/part-time/TransportX/TransportX/pages/trip/edit.vue?85f5","webpack:///D:/project/part-time/TransportX/TransportX/pages/trip/edit.vue?5a7a","webpack:///D:/project/part-time/TransportX/TransportX/pages/trip/edit.vue?6038","webpack:///D:/project/part-time/TransportX/TransportX/pages/trip/edit.vue?58d2","uni-app:///pages/trip/edit.vue","webpack:///D:/project/part-time/TransportX/TransportX/pages/trip/edit.vue?cdd5","webpack:///D:/project/part-time/TransportX/TransportX/pages/trip/edit.vue?5d3f"],"names":["createPage","Page"],"mappings":"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","file":"pages/trip/edit.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/trip/edit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./edit.vue?vue&type=template&id=b82f18ea&scoped=true&\"\nvar renderjs\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&id=b82f18ea&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b82f18ea\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/trip/edit.vue\"\nexport default component.exports","export * from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=template&id=b82f18ea&scoped=true&\"","var components\ntry {\n  components = {\n    uTag: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-tag/u-tag\" */ \"uview-ui/components/u-tag/u-tag.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uSearch: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-search/u-search\" */ \"uview-ui/components/u-search/u-search.vue\"\n      )\n    },\n    uForm: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-form/u-form\" */ \"uview-ui/components/u-form/u-form.vue\"\n      )\n    },\n    uFormItem: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-form-item/u-form-item\" */ \"uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-input/u-input\" */ \"uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uSelect: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-select/u-select\" */ \"uview-ui/components/u-select/u-select.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.currentTrip.record, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var m0 = _vm.getTimeFromRecord(item.start_markerId)\n    var m1 = _vm.getTimeFromRecord(item.end_markerId)\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.currentSelect = \"start_markerId\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.currentSelect = \"end_markerId\"\n    }\n\n    _vm.e2 = function($event) {\n      _vm.selectShow = true\n      _vm.currentSelect = \"transportation\"\n    }\n\n    _vm.e3 = function($event) {\n      _vm.selectShow = true\n      _vm.currentSelect = \"purpose\"\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"","<template>\r\n    <view>\r\n        <map id=\"map\" style=\"width: 100vw; height: calc(100vh - 580rpx);\" :latitude=\"latitude\" :longitude=\"longitude\"\r\n            :markers=\"markers\" :polyline=\"polyline\" :show-location=\"true\" @markertap=\"markerTap\"></map>\n            <cover-view class=\"map-control u-flex flex-col\">\n                <button @click=\"clearSearch\" class=\"clear u-reset-button icon-circle u-flex u-col-center u-row-around u-m-b-20\">\n                    清除搜索结果\n                </button>\n                <button @click=\"moveToStart\" class=\"primary u-reset-button icon-circle u-flex u-col-center u-row-around\">\n                    返回初始位置\n                </button>\n            </cover-view>\r\n        <scroll-view :hidden=\"isEdit\" scroll-y=\"true\" class=\"cus-full-vw u-p-20\" style=\"height: 580rpx;\">\n            <view class=\"record u-flex flex-col cus-full-pw\">\n                <view class=\"record-item u-flex u-row-between cus-full-pw u-p-t-20 u-p-b-20 u-border-bottom\" v-for=\"(item, index) in currentTrip.record\" :key=\"index\">\n                    <view class=\"record-item__info u-flex flex-col u-col-top\">\n                        <view class=\"u-font-xl\" :style=\"{color: polyline[index+1].color, fontWeight: 'bold'}\">\n                            第{{index+1}}条\n                            <u-tag class=\"u-m-l-20\" :text=\"item.transportation\" type=\"primary\" mode=\"plain\" shape=\"circle\" size=\"mini\"/>\n                            <u-tag class=\"u-m-l-10\" :text=\"item.purpose\" type=\"success\" mode=\"plain\" shape=\"circle\" size=\"mini\"/>\n                        </view>\n                        <view class=\"u-font-sm u-m-t-30 content-color\">\n                            {{getTimeFromRecord(item.start_markerId)}}-{{getTimeFromRecord(item.end_markerId)}}\n                        </view>\n                    </view>\n                    <view class=\"record-item__action u-flex u-col-center\">\n                        <!-- 编辑 -->\n                        <view class=\"icon-circle bg-primary u-flex u-row-around u-col-center\" @click=\"editRecord(index)\"><u-icon name=\"edit-pen\"></u-icon></view>\n                        <!-- 删除 -->\n                        <view class=\"icon-circle bg-error u-flex u-row-around u-col-center u-m-l-20\" @click=\"removeRecord(index)\"><u-icon name=\"trash\"></u-icon></view>\n                    </view>\n                </view>\n            </view>\n            <!-- 新增出行记录 -->\r\n            <u-button type=\"primary\" @click=\"addRecord\">\r\n                <u-icon name=\"plus\"></u-icon>\r\n                新增出行记录\r\n            </u-button>\r\n        </scroll-view>\r\n        <view :hidden=\"!isEdit\" class=\"edit-area cus-full-vw u-p-20\" style=\"height: 580rpx;\">\n            <!-- 搜索地点 -->\n            <u-search placeholder=\"输入地点搜索\" v-model=\"keyword\" disabled :show-action=\"false\" input-align=\"center\" @click=\"chooseLocation\"></u-search>\r\n            <u-form class=\"edit-area__form u-flex u-col-center cus-full-pw\" ref=\"uForm\" :model=\"model\" :rules=\"rules\"\r\n                :errorType=\"errorType\">\r\n                <view class=\"form-row u-flex\">\r\n                    <!-- 路径起点 -->\r\n                    <u-form-item class=\"form-row__item\" label-position=\"left\" :label=\"rules.start_markerId.label\"\r\n                        label-width=\"120\" required prop=\"start_markerId\">\r\n                        <u-input :class=\"currentSelect == 'start_markerId' ? 'input-active' : ''\" :border=\"false\" type=\"number\" v-model=\"model.start_markerId\" placeholder=\"选择起点\" @click=\"currentSelect = 'start_markerId';\"\r\n                            disabled></u-input>\r\n                    </u-form-item>\r\n                    <!-- 路径终点 -->\r\n                    <u-form-item class=\"form-row__item\" label-position=\"left\" :label=\"rules.end_markerId.label\"\r\n                        label-width=\"120\" required prop=\"end_markerId\">\r\n                        <u-input :class=\"currentSelect == 'end_markerId' ? 'input-active' : ''\" :border=\"false\" type=\"number\" v-model=\"model.end_markerId\" placeholder=\"选择终点\" @click=\"currentSelect = 'end_markerId';\"\r\n                            disabled></u-input>\r\n                    </u-form-item>\r\n                </view>\r\n                <view class=\"form-row u-flex\">\r\n                    <!-- 出行方式 -->\r\n                    <u-form-item class=\"form-row__item\" label-position=\"left\" :label=\"rules.transportation.label\"\r\n                        label-width=\"120\" required prop=\"transportation\">\r\n                        <u-input :class=\"currentSelect == 'transportation' ? 'input-active' : ''\" :border=\"false\" type=\"select\" :select-open=\"selectShow && currentSelect == 'transportation'\"\r\n                            v-model=\"model.transportation\" placeholder=\"请选择\" @click=\"selectShow = true; currentSelect = 'transportation';\"></u-input>\r\n                    </u-form-item>\r\n                    <!-- 出行目的 -->\r\n                    <u-form-item class=\"form-row__item\" label-position=\"left\" :label=\"rules.purpose.label\" label-width=\"120\"\r\n                        required prop=\"purpose\">\r\n                        <u-input  :class=\"currentSelect == 'purpose' ? 'input-active' : ''\" :border=\"false\" type=\"select\" :select-open=\"selectShow && currentSelect == 'purpose'\"\r\n                            v-model=\"model.purpose\" placeholder=\"请选择\" @click=\"selectShow = true; currentSelect = 'purpose';\"></u-input>\r\n                    </u-form-item>\r\n                </view>\r\n            </u-form>\r\n            <!-- 操作按钮 -->\r\n            <view class=\"edit-area__btn cus-full-pw u-flex u-m-t-20\">\r\n                <u-button @click=\"submit\" type=\"primary\" size=\"medium\">保存</u-button>\r\n                <u-button @click=\"closeForm\" size=\"medium\">取消</u-button>\r\n            </view>\r\n        </view>\r\n        <!-- 表单选择器 -->\r\n        <u-select mode=\"single-column\" :list=\"selectList\" v-model=\"selectShow\" @confirm=\"selectConfirm\"></u-select>\r\n    </view>\r\n</template>\r\n\r\n<script>\n    let map = null;\n    const colorList = [\"#3742fa\",\"#ffa502\",\"#ff6348\",\"#2ed573\",\"#2f3542\",\"#993333\"]\r\n    import {\r\n        mapState\r\n    } from 'vuex';\r\n    export default {\r\n        data() {\r\n            return {\r\n                currentTrip: {},\n                latitude: \"\",\n                longitude: \"\",\r\n                currentTripIndex: null,\n                currentEdit: null,\r\n                isEdit: false,\n                keyword: \"\",\r\n                model: {\r\n                    start_markerId: null,\r\n                    end_markerId: null,\r\n                    transportation: \"\",\r\n                    purpose: \"\"\r\n                },\r\n                rules: {\r\n                    start_markerId: {\r\n                        label: \"路径起点\",\r\n                        required: true,\r\n                        message: \"请选择路径起点\",\r\n                        trigger: 'change',\r\n                        type: \"number\",\r\n                    },\r\n                    end_markerId: {\r\n                        label: \"路径终点\",\r\n                        required: true,\r\n                        message: \"请选择路径终点\",\r\n                        trigger: 'change',\r\n                        type: \"number\",\r\n                    },\r\n                    transportation: {\r\n                        label: \"出行方式\",\r\n                        required: true,\r\n                        message: \"请选择出行方式\",\r\n                        trigger: 'change',\r\n                        type: \"enum\",\r\n                        enum: [\"公交车\", \"步行\", \"自行车\", \"地铁\", \"汽车\", \"公交车\", \"飞机\", \"高铁\"],\r\n                    },\r\n                    purpose: {\r\n                        label: \"出行目的\",\r\n                        required: true,\r\n                        message: \"请选择出行目的\",\r\n                        trigger: 'change',\r\n                        type: \"enum\",\r\n                        enum: [\"公务\", \"购物餐饮\", \"看病探病\", \"陪护\", \"其他\", \"上班\", \"探亲访友\", \"文体娱乐\", \"上学\"]\r\n                    }\r\n                },\r\n                selectList: [],\r\n                currentSelect: 'purpose',\r\n                selectShow: false,\r\n                errorType: ['message'],\n                polyline: [],\n                markers: []\r\n            };\r\n        },\r\n        computed: {\n            ...mapState(['trip']),\n        },\r\n        watch: {\r\n            currentSelect(newVal) {\r\n                if (newVal != \"start_markerId\" && newVal != \"end_markerId\") {\r\n                    const list = this.rules[newVal].enum;\r\n                    const selectList = list.map(item => {\r\n                        return {\r\n                            value: item,\r\n                            label: item\r\n                        }\r\n                    });\r\n                    this.selectList = selectList;\r\n                } else {\r\n                    switch (newVal) {\r\n                        case \"start_markerId\":\r\n                            this.$u.toast(\"请在地图上选择起点\");\r\n                            break;\r\n                        case \"end_markerId\":\r\n                            this.$u.toast(\"请在地图上选择终点\");\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        onLoad(options) {\r\n            this.currentTrip = this.trip[options.index]\r\n            this.currentTripIndex = options.index\n            this.initMarkers()\r\n            console.log(this.currentTrip)\r\n        },\r\n        onReady() {\r\n            this.$refs.uForm.setRules(this.rules);\n            this.latitude = this.currentTrip.raw[0].latitude\r\n            this.longitude = this.currentTrip.raw[0].longitude\n            this.refreshPolyline()\n            map = uni.createMapContext('map', this)\r\n        },\r\n        methods: {\n            moveToStart(){\n                map.moveToLocation({\n                    latitude: this.currentTrip.raw[0].latitude,\n                    longitude: this.currentTrip.raw[0].longitude\n                })\n            },\n            clearSearch(){\n                if(this.markers[this.markers.length - 1].id == 9999999999999) {\n                    this.markers.pop()\n                }\n            },\n            getCallout(content, color){\n                return {\n                    content,\n                    color,\n                    fontSize: 14,\n                    borderWidth: 2,\n                    borderRadius: 10,\n                    borderColor: '#fff',\n                    bgColor: '#fff',\n                    padding: 5,\n                    display: 'ALWAYS',\n                    textAlign: 'center'\n                }\n            },\n            initMarkers(){\n                let markers = this.$u.deepClone(this.currentTrip.raw)\n                // 修改marker样式在这里\n                markers.map(item => {\n                    item.width = 18\n                    item.height = 32\n                })\n                markers[0].callout = this.getCallout(\"轨迹起点\", \"#19be6b\")\n                markers[markers.length - 1].callout = this.getCallout(\"轨迹终点\", \"#fa3534\")\n                this.markers = markers\n            },\n            getRandomColor(){\n              return '#'+('00000'+ (Math.random()*0x1000000<<0).toString(16)).substr(-6); \n            },\n            getPolylineWithId(start_markerId, end_markerId){\n                let points = []\n                this.currentTrip.raw.forEach(raw => {\n                    if (raw.id >= start_markerId && raw.id <= end_markerId) {\n                        points.push(raw)\n                    }\n                })\n                return {\n                    points,\n                    color: this.polyline.length < colorList.length ? colorList[this.polyline.length] : this.getRandomColor(),\n                    arrowLine: true,\n                    width: 8\n                }\n            },\n            refreshPolyline(){\n                this.polyline = [\n                    {\n                        points: this.currentTrip.raw,\n                        color: colorList[0],\n                        arrowLine: true,\n                        width: 4\n                    }\n                ]\n                this.currentTrip.record.forEach(record => {\n                    this.polyline.push(this.getPolylineWithId(record.start_markerId, record.end_markerId))\n                })\n            },\n            getRecordFromId(markerId){\n                return this.currentTrip.raw.find(o => o.id === markerId);\n            },\n            getTimeFromRecord(markerId){\n                const rawFound = this.getRecordFromId(markerId);\n                return this.$u.date(rawFound.time, \"hh:MM:ss\")\n            },\n            chooseLocation(){\n                const that = this;\n                uni.chooseLocation({\n                    success(res) {\n                        console.log(\"chooseLocation Res: \", res)\n                        that.clearSearch()\n                        that.markers.push({\n                            id: 9999999999999,\n                            latitude: res.latitude,\n                            longitude: res.longitude,\n                            width: 18,\n                            height: 32,\n                            iconPath: \"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png\",\n                            callout: that.getCallout(res.name, \"#303133\")\n                        })\n                        that.latitude = res.latitude\n                        that.longitude = res.longitude\n                    },\n                    fail(err) {\n                        console.log(\"chooseLocation fail: \", err)\n                    }\n                })\n            },\r\n            markerTap(e) {\r\n                const markerId = e.detail.markerId\n                console.log(\"marker tap: \", markerId)\n                if (markerId != 9999999999999){\n                    if (this.currentSelect == 'start_markerId' || this.currentSelect == 'end_markerId') {\n                        if (this.currentSelect == 'end_markerId' && this.model.start_markerId != null && e.detail.markerId < this.model.start_markerId) {\n                            this.$u.toast(\"终点不得在起点之前\")\n                        }\n                        if (this.currentSelect == 'start_markerId' && this.model.end_markerId != null && e.detail.markerId > this.model.end_markerId) {\n                            this.$u.toast(\"起点不得在终点之后\")\n                        } else {\n                            this.model[this.currentSelect] = markerId;\n                            if(this.currentSelect == 'start_markerId') {\n                                this.markers.map(item => {\n                                    if(item.callout && item.callout.content == \"路径起点\"){\n                                        item.callout = {}\n                                    }\n                                })\n                            }\n                            if(this.currentSelect == 'end_markerId') {\n                                this.markers.map(item => {\n                                    if(item.callout && item.callout.content == \"路径终点\"){\n                                        item.callout = {}\n                                    }\n                                })\n                            }\n                            this.markers.map(item => {\n                                if(item.id == markerId){\n                                    const calloutcContent = this.currentSelect == 'start_markerId' ? '路径起点' : '路径终点';\n                                    item.callout = this.getCallout(calloutcContent, \"#303133\")\n                                }\n                            })\n                        }\n                    }\n                } else {\n                    this.$u.toast(\"请先清除搜索结果再选点\")\n                }\r\n                \r\n            },\r\n            addRecord() {\r\n                this.isEdit = true\n                this.currentSelect = \"start_markerId\"\n                if(this.currentEdit != null) {\n                    this.model = this.currentTrip.record[this.currentEdit]\n                }\r\n            },\n            editRecord(record_index){\n                this.currentEdit = record_index\n                this.addRecord()\n            },\n            removeRecord(record_index){\n                this.$store.commit(\"removeTripRecord\", {index: this.currentTripIndex, record_index,})\n                this.refreshPolyline()\n            },\r\n            selectConfirm(e) {\r\n                this.model[this.currentSelect] = '';\r\n                e.map((val, index) => {\r\n                    this.model[this.currentSelect] += this.model[this.currentSelect] == '' ? val.label : '-' +\r\n                        val.label;\r\n                })\r\n            },\r\n            closeForm() {\r\n                this.model = {\r\n                    start_markerId: null,\r\n                    end_markerId: null,\r\n                    transportation: \"\",\r\n                    purpose: \"\"\r\n                }\r\n                this.isEdit = false\n                this.currentEdit = null\n                this.initMarkers()\r\n            },\r\n            async submit() {\r\n                const that = this;\r\n                this.$refs.uForm.validate(async function(valid) {\r\n                    if (valid) {\r\n                        console.log('验证通过');\r\n                        let model = that.model;\n                        if (that.currentEdit != null) {\n                            that.$store.commit(\"editTripRecord\", {\n                                index: that.currentTripIndex,\n                                record_index: that.currentEdit,\n                                record: {\n                                    start_markerId: model.start_markerId,\n                                    end_markerId: model.end_markerId,\n                                    transportation: model.transportation,\n                                    purpose: model.purpose\n                                }\n                            })\n                        } else {\n                            that.$store.commit(\"addTripRecord\", {\n                                index: that.currentTripIndex,\n                                record: {\n                                    start_markerId: model.start_markerId,\n                                    end_markerId: model.end_markerId,\n                                    transportation: model.transportation,\n                                    purpose: model.purpose\n                                }\n                            })\n                        }\n                        that.polyline.push(that.getPolylineWithId(that.model.start_markerId, that.model.end_markerId))\r\n                        that.closeForm()\r\n                    }\r\n                })\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\n    .map-control {\n        position: fixed;\n        right: 20rpx;\n        bottom: calc(600rpx);\n        button {\n            background-color: #FFFFFF;\n            width: auto !important;\n            font-size: 24rpx !important;\n            padding: 20rpx 30rpx !important;\n        }\n        .primary {\n            color: $u-type-primary !important;\n        }\n        .clear {\n            color: $u-type-error !important;\n        }\n    }\r\n    .edit-area {\r\n        &__btn {\r\n            justify-content: space-around;\r\n        }\r\n\r\n        &__form {\r\n            flex-direction: column;\r\n\r\n            .form-row {\r\n                width: calc(100vw - 80rpx);\r\n                justify-content: space-between;\r\n\r\n                &__item {\r\n                    width: 40vw;\r\n                }\r\n            }\r\n        }\r\n    }\n    .input-active {\n        /deep/ input {\n            border: 2rpx dotted $u-type-primary;\n            border-radius: 8rpx;\n        }\n    }\r\n</style>\n","import mod from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&id=b82f18ea&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&id=b82f18ea&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1614263219788\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}